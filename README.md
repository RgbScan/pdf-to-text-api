# üßæ PDF to Text API

**API-—Å–µ—Ä–≤–∏—Å –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è —Ç–µ–∫—Å—Ç–∞ –∏–∑ PDF-—Ñ–∞–π–ª–æ–≤**, —Ä–∞–∑–≤—ë—Ä–Ω—É—Ç—ã–π —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º FastAPI, Docker –∏ Caddy. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (Uptime Kuma) –∏ –≥–æ—Ç–æ–≤ –∫ –¥–µ–ø–ª–æ—é —Å SSL-—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–º.

## üöÄ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

- –ó–∞–≥—Ä—É–∂–∞–π—Ç–µ PDF ‚Äî –ø–æ–ª—É—á–∞–π—Ç–µ —Ç–µ–∫—Å—Ç –≤ –æ—Ç–≤–µ—Ç–µ.
- –≠–Ω–¥–ø–æ–∏–Ω—Ç `/extract` —Å –º–µ—Ç–æ–¥–æ–º `POST` –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º `file`.
- –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –≤ –±—ç–∫–µ–Ω–¥—ã, –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –∏ data-–ø–∞–π–ø–ª–∞–π–Ω—ã.

---

## üîß –ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫ (–ª–æ–∫–∞–ª—å–Ω–æ)

### 1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

```bash
git clone https://github.com/RgbScan/pdf-to-text-api.git
cd pdf-to-text-api
```

### 2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ `.env`

–°–æ–∑–¥–∞–π—Ç–µ `.env` –Ω–∞ –æ—Å–Ω–æ–≤–µ —à–∞–±–ª–æ–Ω–∞:

```bash
cp .env.example .env
```

### 3. –°–æ–±–µ—Ä–∏—Ç–µ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç

```bash
docker compose up --build -d
```

### 4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É

–û—Ç–∫—Ä–æ–π—Ç–µ:
- üåê `http://localhost/docs` ‚Äî Swagger UI
- ‚úÖ `http://localhost/health` ‚Äî Health check

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `pytest`. –î–ª—è –∑–∞–ø—É—Å–∫–∞ —Ç–µ—Å—Ç–æ–≤:

```bash
pip install -r requirements.txt
pytest
```

–ü—Ä–∏–º–µ—Ä –ø—Ä–æ–≤–µ—Ä–∫–∏ `/health`:

```python
from fastapi.testclient import TestClient
from src.main import app

client = TestClient(app)

def test_health():
    response = client.get("/health")
    assert response.status_code == 200
    assert response.json() == {"status": "ok"}
```

---

## ‚öôÔ∏è –°—Ç–µ–∫

- **FastAPI** ‚Äî backend-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫.
- **Uvicorn** ‚Äî ASGI-—Å–µ—Ä–≤–µ—Ä.
- **Docker / Docker Compose** ‚Äî –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è.
- **Caddy** ‚Äî –æ–±—Ä–∞—Ç–Ω—ã–π –ø—Ä–æ–∫—Å–∏ –∏ SSL.
- **Uptime Kuma** ‚Äî –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏.

---

## üóÇÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
.
‚îú‚îÄ‚îÄ src/                  # –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ FastAPI
‚îÇ   ‚îî‚îÄ‚îÄ main.py
‚îú‚îÄ‚îÄ tests/                # –¢–µ—Å—Ç—ã (pytest)
‚îú‚îÄ‚îÄ Dockerfile            # Docker-–æ–±—Ä–∞–∑ API
‚îú‚îÄ‚îÄ docker-compose.yml    # –°—Ç–µ–∫: API + Caddy + Kuma
‚îú‚îÄ‚îÄ Caddyfile             # Reverse proxy –ø—Ä–∞–≤–∏–ª–∞
‚îú‚îÄ‚îÄ .env                  # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (–≤ .gitignore)
‚îú‚îÄ‚îÄ .env.example          # –®–∞–±–ª–æ–Ω .env
‚îú‚îÄ‚îÄ .gitignore
‚îú‚îÄ‚îÄ .dockerignore
‚îî‚îÄ‚îÄ README.md
```

---

## üì¶ –†–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Docker –∏ Docker Compose.
2. –£–∫–∞–∂–∏—Ç–µ —Å–≤–æ–π `DOMAIN` –≤ `.env`.
3. –ü—Ä–æ–±—Ä–æ—Å—å—Ç–µ 80/443 –ø–æ—Ä—Ç—ã.
4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ `docker compose up --build -d`.

---

## üì° –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (–ø–æ –∂–µ–ª–∞–Ω–∏—é)

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –æ—Ç–∫—Ä–æ–π—Ç–µ:
```
http://localhost:3001
```
–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å Uptime Kuma –ø–æ–º–æ–∂–µ—Ç –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å —Ä–∞–±–æ—Ç—É —Å–µ—Ä–≤–∏—Å–∞.
